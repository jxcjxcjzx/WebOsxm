脚 本 之 家 www.jb51.net素材下载电子书软件下载源码下载服务器常用软件繁体中文

首页
网页制作
脚本专栏
网络编程
数据库
脚本下载
CMS教程
电子书籍
平面设计
媒体动画
操作系统
网站运营
网络安全
C#教程vbvb.netC 语言Java编程DelphijavaAndroid其它相关

Upftp 6年打造，专业免备案网站空间商【免备案】北京BGP/【180G高防】秒解海西数据 租用海外服务器/免备案空间【7B链】买卖友情链接，日付交易安全快服务器租用 域名免费备案VeryCloud云主机，仅需29元，抢疯了！买云空间/主机-云服务器--首选腾佑科技亿恩科技 虚拟主机域名注册顶级提供商



热门栏目：vbscript正则表达式javascript批处理服务器软件素材下载
页面导航： 首页 → 软件编程 → C 语言 → 正文内容 const的实现机制
C++中const的实现机制深入分析

发布：whsnow 字体：[增加 减小] 类型：转载
C语言以及C++语言中的const究竟表示什么？其具体的实现机制又是如何实现的呢？本文将对这两个问题进行一些分析,需要了解的朋友可以参考下

 
问题 
C语言以及C++语言中的const究竟表示什么？其具体的实现机制又是如何实现的呢？ 本文将对这两个问题进行一些分析，简单解释const的含义以及实现机制。 

问题分析 
简单的说const在C语言中表示只读的变量，而在C++语言中表示常量。关于const在C与C++语言中的使用以及更多的区别，以后有时间另开一贴说明。

那么const究竟是如何实现的呢？ 对于声明为const的内置类型，例如int，short，long等等，编译器会如何实现const的本意？那么对于非内置类型是否也是与内置数据类型一样处理呢，例如对于结构体类型则会怎样处理呢？下面通过几个小例子来说明这些问题： 
C语言const示例： 
复制代码 代码如下:

const int i=10; 
int *p=(int *)(&i); 
*p=20; 
printf("i=%d *p=%d \n",i,*p); 

猜一猜输出结果是什么？ i=20 *p=20 
C++语言const示例1： 
复制代码 代码如下:

const int i=10; 
int *p=const_cast<int *>(&i); 
*p=20; 

cout<<"i="<<i<<" *p="<<*p<<endl; 

输出结果是 i=10 *p=20 
C++语言const示例2： 
复制代码 代码如下:

struct test{ 
int j; 
char tmp; 
test() 
{ 
j=30; 
tmp='a'; 
} 
}; 
int main(int argc, char* argv[]) 
{ 
const struct test t1; 
int *q=(int *)(&t1.j); 
*q=40; 
cout<<"j="<<t1.j<<" *q="<<*q<<endl; 
return 0; 
} 

输出结果是 j=40 *q=40 

示例结果分析 
看到上面三组输出结果，有没有感到很诡异： 
问题1，对于const int类型的变量i，C语言中通过指针p修改了值后，i变成了20；而在C++中，通过指针p修改了值后，i仍然是10。 
问题2，C++语言中 const struct test的元素j通过指针q被改变了，为何const int 与 const struct test的反应机制不同？ 

针对问题1，我们知道C语言中const表示只读的变量，既然把const看成是变量，那么其在内存中就会有存储他的空间，并且可以通过指针间接的改变该内存空间的值，当通过指针p改变该内存中的值后，再获取i的值的时候，会访问该空间，得到的是被改变后的值。而C++把const看做常量，编译器会使用常数直接替换掉对i的引用，例如cout<<i; 会理解成cout<<10; 并不会去访问i的内存地址去取数据，这里有点像是C语言里的宏#define i 10。因此C++里i会输出10，而*p会输出20. 

针对问题2，C++语言中只是对于内置数据类型做常数替换，而对于像结构体这样的非内置数据类型则不会。因为结构体类型不是内置数据类型，编译器不知道如何直接替换，因此必须要访问内存去取数据，而访问内存去取数据必然会取到被指针q改变后的值，因此会造成与C++中const int类型完全不一样的处理模式。 

小结 
C语言与C++有很多的区别与联系，const只是其中一个方面，对于const的理解和使用是编程的基础，需要熟练掌握。

QQ空间 新浪微博 腾讯微博 搜狐微博 人人网 开心网 百度搜藏 更多 0
Tags：const 实现机制
复制链接收藏本文打印本文关闭本文返回首页
上一篇：C++派生类与基类的转换规则下一篇：c语言读取obj文件转换数据的小例子

 
相关文章
C++利用容器查找重复列功能实现C语言中全局数组和局部数组的问题Qt之ui在程序中的使用-多继承法介绍判断一个数是不是素数的方法c++ 尽量不要使用#define 而是用const、enum、inC++ 学习之旅 Windows程序内部运行原理C++类URL编码和解码使用技巧c++二叉树的几种遍历算法
友情提醒：本站文件的解压密码：www.jb51.net (请使用最新的winrar) 
文章评论
共有 0  位脚本之家网友发表了评论我来说两句


最 近 更 新
C++可变参数的实现方法
VC6.0代码自动提示 VC6.0在win7环境下代码
ShellExecute函数用法的实例代码
C 语言基础教程(我的C之旅开始了)[九]
数组和指针的区别深入剖析
Qt实现图片移动实例(图文教程)
atoi和itoa函数的实现方法
双向链表插入删除基本应用介绍
如何编译libfreetype方法详解
C++函数中return语句的使用方法

热 点 排 行
VC WinExec打开指定程序或者文件
C语言WinSock学习笔记
C 语言基础教程(我的C之旅开始了
C 语言基础教程（一）颜色加亮
c语言连接mysql数据库的实现方法
C 语言基础教程(我的C之旅开始了
C 语言基础教程(我的C之旅开始了
C 语言基础教程(我的C之旅开始了
tc编译的dos程序和vc编译的win32
C 语言基础教程(我的C之旅开始了

Js与CSS工具
CSS在线压缩格式化(中文)
css 格式化整理工具(英文)
CSS整形格式化
JavaScript 格式化整理工具
jsbeautifier Js格式化整理工具(英文)
php 格式化整理工具(英文)
HTML/JS互相转换工具
javascript pack加密压缩工具
JS Minifier压缩
JS混淆工具
在线JS脚本校验器错误
JavaScript 正则表达式在线测试工具


代码转换工具
Base64编码加密
Escape加解密
HTML/UBB代码转换
GB2312/BIG5繁简字转换
经典小工具集 数字转换
HTML多功能代码转换器
迅雷快车加/解密
汉字转换拼音

关于本站 - 广告合作 - 联系我们 - 免责声明 - 网站地图 - 意见反馈 - 返回顶部
CopyRight © 2006-2012 脚本之家 JB51.Net , All Rights Reserved. 苏ICP备12007328号-1
业务QQ:461478385 QQ群:14624678、36345889

 

 
