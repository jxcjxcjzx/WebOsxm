近来，仔细研究了发挥U盘的极限速度——磁盘扇区数精确调节！ 一文，并向hfsp 进行了请教，感觉对 磁道、扇区、柱面、磁头数、簇、MBR、DBR等磁盘基本知识不是很了解，于是找到下面一篇文章，和朋友们共同学习。

硬盘的DOS管理结构 

1.磁道，扇区，柱面和磁头数 


硬盘最基本的组成部分是由坚硬金属材料制成的涂以磁性介质的盘片，不同容量硬盘的盘片数不等。每个盘片有两面，都可记录信息。盘片被分成许多扇形的区 域，每个区域叫一个扇区，每个扇区可存储128×2的N次方（N＝0.1.2.3）字节信息。在DOS中每扇区是128×2的2次方＝512字节，盘片表 面上以盘片中心为圆心，不同半径的同心圆称为磁道。硬盘中，不同盘片相同半径的磁道所组成的圆柱称为柱面。磁道与柱面都是表示不同半径的圆，在许多场合， 磁道和柱面可以互换使用，我们知道，每个磁盘有两个面，每个面都有一个磁头，习惯用磁头号来区分。扇区，磁道（或柱面）和磁头数构成了硬盘结构的基本参 数，帮这些参数可以得到硬盘的容量，基计算公式为： 
存储容量＝磁头数×磁道（柱面）数×每道扇区数×每扇区字节数 
要点：（1）硬盘有数个盘片，每盘片两个面，每个面一个磁头 
（2）盘片被划分为多个扇形区域即扇区 
（3）同一盘片不同半径的同心圆为磁道 
（4）不同盘片相同半径构成的圆柱面即柱面 
（5）公式：　存储容量＝磁头数×磁道（柱面）数×每道扇区数×每扇区字节数 
（6）信息记录可表示为：××磁道（柱面），××磁头，××扇区 
磁道:当磁盘旋转时，磁头若保持在一个位置上，则每个磁头都会在磁盘表面划出一个圆形轨迹，这些圆形轨迹就叫做磁道。这些磁道用肉眼是根本看不到的，因为它们仅是盘面上以特殊方式磁化了的一些磁化区，磁盘上的信息便是沿着这样的轨道存放的。相邻磁道之间并不是紧挨着的，这是因为磁化单元相隔太近时磁性会相互产生影响，同时也为磁头的读写带来困难。一张1.44MB的3.5英寸软盘，一面有80个磁道，而硬盘上的磁道密度则远远大于此值，通常一面有成千上万个磁道。


扇区：磁盘上的每个磁道被等分为若干个弧段，这些弧段便是磁盘的扇区，每个扇区可以存放512个字节的信息，磁盘驱动器在向磁盘读取和写入数据时，要以扇区为单位。1.44MB3.5英寸的软盘，每个磁道分为18个扇区。
柱面：硬盘通常由重叠的一组盘片构成，每个盘面都被划分为数目相等的磁道，并从外缘的“0”开始编号，具有相同编号的磁道形成一个圆柱，称之为磁盘的柱面。磁盘的柱面数与一个盘面上的磁道数是相等的。由于每个盘面都有自己的磁头，因此，盘面数等于总的磁头数。所谓硬盘的CHS，即Cylinder（柱面）、Head（磁头）、Sector（扇区），只要知道了硬盘的CHS的数目，即可确定硬盘的容量，硬盘的容量=柱面数*磁头数*扇区数*512B。



2.簇 
“簇”是DOS进行分配的最小单位。当创建一个很小的文件时，如是一个字节，则它在磁盘上并不是只占一个字节的空间，而是占有整个一簇。DOS视不同的 存储介质（如软盘，硬盘），不同容量的硬盘，簇的大小也不一样。簇的大小可在称为磁盘参数块（BPB）中获取。簇的概念仅适用于数据区。 
本点：（1）“簇”是DOS进行分配的最小单位。 
（2）不同的存储介质，不同容量的硬盘，不同的DOS版本，簇的大小也不一样。 
（3）簇的概念仅适用于数据区。 

3.扇区编号定义：绝对扇区与DOS扇区 
由前面介绍可知，我们可以用柱面/磁头/扇区来唯一定位磁盘上每一个区域，或是说柱面/磁头/扇区与磁盘上每一个扇区有一一对应关系，通常DOS将“柱 面/磁头/扇区”这样表示法称为“绝对扇区”表示法。但DOS不能直接使用绝对扇区进行磁盘上的信息管理，而是用所谓“相对扇区”或“DOS扇区”。“相 对扇区”只是一个数字，如柱面140，磁头3，扇区4对应的相对扇区号为2757。该数字与绝对扇区“柱面/磁头/扇区”具有一一对应关系。当使用相对扇 区编号时，DOS是从柱面0，磁头1，扇区1开始（注：柱面0，磁头0，扇区1没有DOS扇区编号，DOS下不能访问，只能调用BIOS访问），第一个 DOS扇区编号为0，该磁道上剩余的扇区编号为1到16（设每磁道17个扇区），然后是磁头号为2，柱面为0的17个扇区，形成的DOS扇区号从17到 33。直到该柱面的所有磁头。然后再移到柱面1，磁头1，扇区1继续进行DOS扇区的编号，即按扇区号，磁头号，柱面号（磁道号）增长的顺序连续地分配 DOS扇区号。 
公式：记DH－－第一个DOS扇区的磁头号 
DC－－第一个DOS扇区的柱面号 
DS－－第一个DOS扇区的扇区号 
NS－－每磁道扇区数 
NH－－磁盘总的磁头数 
则某扇区（柱面C，磁头H，扇区S）的相对扇区号RS为： 
RS＝NH×NS×（C－DC）＋NS×（H－DH）＋（S－DS） 
若已知RS，DC，DH，DS，NS和NH则 
S＝（RS　MOD　NS）＋DS 
H＝（（RS　DIV　NS）MOD　NH）＋DH 
C＝（（RS　DIV　NS）DIV　NH）＋DC 
要点：（1）以柱面/磁头/扇区表示的为绝对扇区又称物理磁盘地址 
（2）单一数字表示的为相对扇区或DOS扇区，又称逻辑扇区号 
（3）相对扇区与绝对扇区的转换公式 






[ 此帖被a102135在2011-11-07 22:04重新编辑 ]
本帖最近评分记录：共49条评分 ，M币+339
飞向狙沙	M币 +14	謝謝分享	 01-18
emil77	M币 +8	謝謝分享	 2012-11-18
不吭你吭谁	M币 +8	謝謝分享	 2012-06-20
653131267	M币 +5	優秀文章	 2012-01-03
muxinpeng	M币 +8	-	 2011-12-27
qsav	M币 +6	謝謝分享	 2011-11-27
jdwx	M币 +5	专业 学习	 2011-11-27
含笑饮砒霜	M币 +5	-	 2011-11-19
彭大伟	M币 +6	謝謝分享	 2011-11-14
完美人生007	M币 +10	you Ahao  a	 2011-11-13
12345
回复
举报
分享到淘江湖新浪QQ微博QQ空间开心人人豆瓣网易微博百度鲜果白社会飞信
在线a102135

 
数码之家帮帮团

发帖40281
M币24515
专家174
贡献660
粉丝706
加关注发消息	
只看该作者 1楼 发表于: 2011-11-07
4.DOS磁盘区域的划分 
格式化好的硬盘，整个磁盘按所记录数据的作用不同可分为主引导记录（MBR:Main Boot Record），Dos引导记录 （DBR:Dos Boot Record），文件分配表（FAT:File Assign Table），根目录 （BD:Boot Directory）和数据区。前5个重要信息在磁盘的外磁道上，原因是外圈周长总大于内圈周长，也即外圈存储密度要小些，可靠性高 些。
要点：（1）整个硬盘可分为MBR，DBR，FAT，BD和数据区。 
（2）MBR，DBR，FAT，和BD位于磁盘外道。 

5.MBR 
MBR位于硬盘第一个物理扇区（绝对扇区）柱面0，磁头0，扇区1处。由于DOS是由柱面0，磁头1，扇区1开始，故MBR不属于DOS扇区，DOS不 能直接访问。MBR中包含硬盘的主引导程序和硬盘分区表。分区表有4个分区记录区。记录区就是记录有关分区信息的一张表。它从主引导记录偏移地址 01BEH处连续存放，每个分区记录区占16个字节。 
分区表的格式 
分区表项的偏移 意义 　　占用字节数 
00 引导指示符 1B 
01 分区引导记录的磁头号 1B 
02 分区引导记录的扇区和柱面号 2B 
04 系统指示符 1B 
05 分区结束磁头号 1B 
06 分区结束扇区和柱面号 2B 
08 分区前面的扇区数 4B 
0C 分区中总的扇区数 4B 
4个分区中只能有1个活跃分区，即C盘。标志符是80H在分区表的第一个字节处。若是00H则表示非活跃分区。例如： 
80　01　01　00　0B FE 3F 81 3F 00 00 00 C3 DD 1F 00 
00 00 01 82 05 FE BF 0C 02 DE 1F 00 0E 90 61 00 
00　00　00　00　00　00　00　00　00　00　00　00　00　00　00　00 
00　00　00　00　00　00　00　00　00　00　00　00　00　00　00　00 
要点：（1）MBR位于硬盘第一个物理扇区柱面0，磁头0，扇区1处。不属于DOS扇区， 
（2）主引导记录分为硬盘的主引导程序和硬盘分区表。 

6.DBR 
DBR位于柱面0，磁头1，扇区1，即逻辑扇区0。DBR分为两部分：DOS引导程序和BPB（BIOS参数块）。其中DOS引导程序完成DOS系统文 件（IO.SYS，MSDOS.SYS）的定位与装载，而BPB用来描述本DOS分区的磁盘信息，BPB位于DBR偏移0BH处，共13字节。它包含逻辑 格式化时使用的参数，可供DOS计算磁盘上的文件分配表，目录区和数据区的起始地址，BPB之后三个字提供物理格式化（低格）时采用的一些参数。引导程序 或设备驱动程序根据这些信息将磁盘逻辑地址（DOS扇区号）转换成物理地址（绝对扇区号）。BPB格式 
序号 偏移地址 意义 
1 03H－0AH OEM号 
2 0BH－0CH 每扇区字节数 
3 0DH 每簇扇区数 
4 0EH－0FH 保留扇区数 
5 10H FAT备份数 
6 11H－12H 根目录项数 
7 13H－14H 磁盘总扇区数 
8 15H 描述介质 
9 16H－17H 每FAT扇区数 
10 18H－19H 每磁道扇区数 
11 1AH－1BH 磁头数 
12 1CH－1FH 特殊隐含扇区数 
13 20H－23H 总扇区数 
14 24H－25H 物理驱动器数 
15 26H 扩展引导签证 
16 27H－2AH 卷系列号 
17 2BH－35H 卷标号 
18 36H－3DH 文件系统号 
DOS引导记录公式： 
文件分配表≡保留扇区数 
根目录≡保留扇区数＋FAT的个数×每个FAT的扇区数 
数据区≡根目录逻辑扇区号＋（32×根目录中目录项数＋（每扇区字节数－1））DIV每扇区字节数 
绝对扇区号≡逻辑扇区号＋隐含扇区数 
扇区号≡（绝对扇区号MOD每磁道扇区数）＋1 
磁头号≡（绝对扇区号DIV每磁道扇区数）MOD磁头数 
磁道号≡（绝对扇区号DIV每磁道扇区数）DIV磁头数 
要点：（1）DBR位于柱面0，磁头1，扇区1，其逻辑扇区号为0 
（2）DBR包含DOS引导程序和BPB。 
（3）BPB十分重要，由此可算出逻辑地址与物理地址。 

7.文件分配表 
文件分配表是DOS文件组织结构的主要组成部分。我们知道DOS进行分配的最基本单位是簇。文件分配表是反映硬盘上所有簇的使用情况，通过查文件分配表 可以得知任一簇的使用情况。DOS在给一个文件分配空间时总先扫描FAT，找到第一个可用簇，将该空间分配给文件，并将该簇的簇号填到目录的相应段内。即 形成了“簇号链”。FAT就是记录文件簇号的一张表。FAT的头两个域为保留域，对FAT12来说是3个字节，FAT来说是4个字节。其中头一个字节是用 来描述介质的，其余字节为FFH 。介质格式与BPB相同。 
第一个字节的8位意义： 
7　6　5　4　3　２　１ ０ 
└─────-┘ │ │ │┌0非双面 
置1 │ │ └┤ 
│ │ └1双面 
│ │┌0不是8扇区 
│ └┤ 
│ └1是8扇区 
│┌0不是可换的 
└┤ 
└1是可换的 
FAT结构含义 
FAT12 FAT16 意义 
000H 0000H 可用 
FF0H－FF6H FFF0H－FFF6H 保留 
FF7H FFF7H 坏 
FF8H－FFFH FFF8H－FFFFH 文件最后一个簇 
×××H ××××H 文件下一个簇 
对于FAT16，簇号×2作偏移地址，从FAT中取出一字即为FAT中的域。 
逻辑扇区号＝数据区起始逻辑扇区号＋（簇号－2）×每簇扇区数 
簇号＝（逻辑扇区号－数据区起始逻辑扇区号）DIV每簇扇区数＋2 
要点：（1）FAT反映硬盘上所有簇的使用情况，它记录了文件在硬盘中具体位置（簇）。 
（2）文件第一个簇号（在目录表中）和FAT的该文件的簇号串起来形成文件的“簇号链”，恢复被破坏的文件就是根 
据这条链。 
（3）由簇号可算逻辑扇区号，反之，由逻辑扇区号也可以算出簇号，公式如上。 
（4）FAT位于DBR之后，其DOS扇区号从1开始。
8.文件目录 
文件目录是DOS文件组织结构的又一重要组成部分。文件目录分为两类：根目录，子目录。根目录有一个，子目录可以有多个。子目录下还可以有子目录，从而 形成“树状”的文件目录结构。子目录其实是一种特殊的文件，DOS为目录项分配32字节。目录项分为三类：文件，子目录（其内容是许多目录项），卷标（只 能在根目录，只有一个。目录项中有文件（或子目录，或卷标）的名字，扩展名，属性，生成或最后修改日期，时间，开始簇号，及文件大小。 
目录项的格式 
字节偏移 意义 占字节数 
00H 文件名 8B 
08H 扩展名 3B 
0BH 文件属性 1B 
0CH 保留 10B 
16H 时间 2B 
18H 日期 2B 
1AH 开始簇号 2B 
1CH 文件长度 4B 
目录项文件名区域中第一个字节还有特殊的意义：00H代表未使用 
05H代表实际名为E5H 
EBH代表此文件已被删除 
目录项属性区域的这个字节各个位的意义如下： ７　６　５　４　３　２　１　０ 
未　修　修　子　卷　系　隐　只 
用　改　改　目　标　统　藏　读 
标　标　录　　　属　属　属 
志　志　　　　　性　性　性 
注意：WINDOWS的长文件名使用了上表中所说的“保留”这片区域。 
要点：（1）文件目录是记录所有文件，子目录名，扩展名属性，建立或删除最后修改日期。文件开始簇号及文件长度的一张 
登记表. 
（2）DOS中DIR列出的内容训是根据文件目录表得到的。 
（3）文件起始簇号填在文件目录中，其余簇都填在FAT中上一簇的位置上。 

9.物理驱动器与逻辑驱动器 
物理驱动器指实际安装的驱动器。 
逻辑驱动器是对物理驱动器格式化后产生的。 
10.硬盘接口
ATA
　　全称Advanced Technol




ogy Attachment，是用传统的 40-pin 并口数据线连接主板与硬盘的，外部接口速度最大为133MB/s，因为并口线的抗干扰性太差，且排线占空间，不利计算机散热，将逐渐被 SATA 所取代。

IDE


　　IDE的英文全称为“Integrated Drive Electronics”，即“电子集成驱动器”，俗称PATA并口。

SATA


　　使用SATA（Serial ATA）口的硬盘又叫串口硬盘，是未来PC机硬盘的趋势。2001年，由Intel、APT、Dell、IBM、希捷、迈拓这几大厂商组成的Serial ATA委员会正式确立了Serial ATA 1.0规范，2002年，虽然串行ATA的相关设备还未正式上市，但Serial ATA委员会已抢先确立了Serial ATA 2.0规范。Serial ATA采用串行连接方式，串行ATA总线使用嵌入式时钟信号，具备了更强的纠错能力，与以往相比其最大的区别在于能对传输指令（不仅仅是数据）进行检查，如果发现错误会自动矫正，这在很大程度上提高了数据传输的可靠性。串行接口还具有结构简单、支持热插拔的优点。

SATA2


　　希捷在SATA的基础上加入NCQ本地命令阵列技术，并提高了磁盘速率。

　　SCSI 全称为Small Computer System Interface（小型机系统接口），历经多世代的发展，从早期的 SCSI-II，到目前的 Ultra320 SCSI 以及 Fiber-Channel （光纤通道），接头类型也有多种。SCSI 硬盘广为工作站及个人计算机以及服务器所使用，因为它的转速快，可达 15000 rpm，且数据传输时占用 CPU 运算资源较低，但是单价也比同样容量的 ATA 及 SATA 硬盘昂贵。

　　SAS（Serial Attached SCSI）是新一代的SCSI技术，和SATA硬盘相同，都是采取序列式技术以获得更高的传输速度，可达到3Gb/s。此外也透过缩小连接线改善系统内部空间等。

　　此外，由于SAS硬盘可以与SATA硬盘共享同样的背板，因此在同一个SAS存储系统 中，可以用SATA硬盘来取代部分昂贵的SCSI硬盘，节省整体的存储成本。
本帖最近评分记录：共15条评分 ，M币+106
lom	M币 +5	-	 02-24
飞向狙沙	M币 +11	謝謝分享	 01-19
emil77	M币 +8	謝謝分享	 2012-11-18
不吭你吭谁	M币 +7	認真發帖	 2012-06-20
shuishou	M币 +5	謝謝分享	 2012-02-23
完美人生007	M币 +10	-	 2011-11-13
小米	M币 +6	優秀文章	 2011-11-10
929550087	M币 +10	謝謝分享	 2011-11-08
无名指的等待	M币 +5	謝謝分享	 2011-11-08
wan06	M币 +8	優秀文章	 2011-11-08
12
回复
举报
在线a102135

 
数码之家帮帮团

发帖40281
M币24515
专家174
贡献660
粉丝706
加关注发消息	
只看该作者 2楼 发表于: 2011-11-07
11.硬盘制造商

EMC 

　　EMC为一家美国信息存储资讯科技公司， 主要业务为信息存储及管理产品、服务和解决方案。EMC 公司创建于 1979 年，总部在马萨诸塞州霍普金顿市

　　EMC Clariion CX500EMC公司的股票符号是 EMC，在纽约股票交易所交易，并且是 S&P 500 成份股之一。

希捷(Seagate)

　　希捷科技（英语：Seagate Technology，NYSE：STX）是全球主要的硬盘厂商之一，于1979年在美国加州成立，现时在开曼群岛注册。现时，希捷的主要产品包括桌面硬盘，企业用硬盘，笔记本电脑硬盘和微型硬盘。在专门研发硬盘的厂商中，希捷是历史最悠久的。它的第一个硬盘产品，容量是5MB。在2006年5月，希捷科技收购了另一间硬盘厂商－迈拓公司。产品销量方面，希捷报称自己是第一间公司，售出10亿个硬盘产品。

西部数据(Westdigital)

　　市场占有率仅次于希捷。以桌面产品为主。其桌面产品分为侧重高IO性能的Black系列（俗称“黑盘”），普通的Blue系列（俗称蓝盘），以及侧重低功耗、低噪音的环保Green系列（俗称绿盘）。

　　西部数据同时也提供面向企业近线存储的Raid Edition系列，简称RE系列。同时也有SATA接口的10000RPM的猛禽系列和迅猛龙(VelociRaptor)系列。

日立(Hitachi)

　　第三大硬盘厂商。主要由收购的原IBM硬盘部门发展而来。

　　日立制作所（日文：株式会社日立制作所；英文：Hitachi, Ltd.），简称日立，总部位于日本东京，致力于家用电器、电脑产品、半导体、产业机械等产品，是日本最大的综合电机生产商。

　三星(Samsung)

　　三星电子（Samsung Electronics KSE：005930 、KSE：005935 、LSE：SMSN、LSE：SMSD）是世界上最大的电子工业公司，三星集团子公司之一。1938年3月它于大韩民国大邱广域市成立，创始人是李秉喆，现在的社长是李健熙。一开始它是一个出口商，但很快它就进入了许多其它领域。今天它在全世界58个国家拥有20多万职员。2003年，它的周转值为1017亿美元。在世界上最有名的100个商标的列表中，三星电子是唯一的一个韩国商标，是韩国民族工业的象征。

迈拓（Maxtor）

　　迈拓（Maxtor）是一家成立于1982年的美国硬盘厂商，在2006年被另外一家硬盘厂商希捷公司收购。[1] 在2005年12月即收购前，迈拓公司是世界第三大硬盘生产商。现在迈拓公司作为希捷公司的一家子公司运营。迈拓同时经营桌面电脑与服务器市场, 相对于速度而言，迈拓更关注于硬盘容量。

东芝（Toshiba)

　　是日本最大的半导体制造商，亦是第二大综合电机制造商，隶属于三井集团旗下。东芝是由两家日本公司于1939年合并成的。

　　东芝是世界上芯片制造商中的重要成员。2009年2月，东芝并购富士通硬盘部门。

富士通（Fujitsu）

　　富士通株式会社（Fujitsū Kabushiki-gaisha）是一家日本公司，专门制作半导体、电脑(超级电脑、个人电脑、服务器)、通讯装置及服务，总部位于东京。

　　2009年2月，东芝并购富士通硬盘部门。
