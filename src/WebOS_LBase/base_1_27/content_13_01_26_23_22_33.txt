


您还未登录 !登录注册
 .




.



论坛首页 →Java企业应用论坛 →
使用JMeter做性能测试的心得
 .
全部HibernateSpringStrutsiBATIS企业应用LuceneSOAJava综合设计模式TomcatOOJBoss




Java开发新方式：专注UI，快速开发

浏览 13745 次
 



锁定老帖子 主题：使用JMeter做性能测试的心得

精华帖 (0) :: 良好帖 (7) :: 新手帖 (0) :: 隐藏帖 (0)
 


作者

正文 




javazhujf
等级: 初级会员

性别: 
文章: 41
积分: 60
来自: 沈阳

 


   发表时间：2008-07-03   




<>猎头职位: 北京: 【北京】游戏公司诚邀php开发工程师

相关文章:  ■Apache JMeter
■有没有这样一种压力测试工具
■实战：使用JMeter的Java Sampler轻松定制自己的benchmark

推荐群组: GlassFish 
更多相关推荐
企业应用.
 企业应用开发过程中，性能测试是很重要的一个环节，在这个环节中Apache的JMeter以它开源、100%纯Java、操作方便等优点发挥着很大的作用。 
经过一段时间的使用，多少有些心得和技巧，拿出来共享，希望能有些帮助。 

1、制作测试脚本： 
手工制作测试脚本，需要你知道请求的url和携带的参数等等，太花费时间， 
所以可以用badboy工具录制脚本。这个工具虽然不是开源的，但是却可以用来免费的录制成.jmx的脚本，使用起来很方便。 
官方网站是：http://www.badboy.com.au/ 

2、出现乱码了？ 
在用JMeter发行HTTPRequest时，在请求参数中有中文时，发现存储到DB中后，相应的字段是乱码， 
明明在参数后面的Encode选项中打了V。后来发现badboy录制脚本的时候并没有记录编码方式，所以修改脚本， 
在Content encoding中设置正确的编码方式就不会出现乱码了。 

3、JMeter的妙用---准备测试数据： 
要求性能测试开始前，先准备5W条数据。当然可以通过直接修改DB，但是如果这5W条数据涉及到很多表的关联， 
甚至还要通过存储过程的处理怎么办，直接修改DB很容易出现错误的数据，要是在客户的机器上弄错，可就闯祸了。 
这时候想到了JMeter，它本来是用来模拟大量用户并发请求的，现在用它来批量的生成数据吧。 
如果要求每条数据都不同，就要修改脚本，使用JMeter的函数来动态产生数据，比较常用的是CSVRead函数， 
记不住名的话Ctrl+F可以呼唤出函数助手。使用这个函数的时候需要注意几点，首先是csv文件的编码格式， 
使用ansi没有问题，使用unicode时会使读取的第一行数据出现错误； 
${__CSVRead(data.txt,0)}---读取本行的第一列值 
${__CSVRead(data.txt,1)}${__CSVRead(data.txt,next)}---读取本行的第二列值，并把行标移动到下一行 
试验证明JMeter应该做好了同步，在多线程环境下上面的调用方法没有问题； 
最后，修改JMeter的线程数会加快数据生成的速度，原理是当并发线程在20左右的时候会达到最大的吞吐量（request/分）， 
所以应该设定线程数20左右。 

4、JMeter中debug方法： 
JMeter提供了log函数输出log，但是有时候并不好用，比如我想输出某个函数的返回值看是不是正确的， 
${__log(${__CSVRead(data.txt,1)})}这样的写法是错误的，JMeter会抛出异常，该怎么办呢？ 
答案是巧用监听器（Listener）来输出想看到的数据，结果显示为树的那个监听器， 
它可以让你查看每个sampler的请求数据和响应数据，在请求数据中就有你想看到的信息。 

5、常用的功能： 
・使用HTTP Cookie Manager或URL重写实现同一线程内的多个请求共享Session。 
・把Login的请求放到只执行一次的控制器中，那么即使循环多次，Login也只请求一次。 
・如果想让多个线程在同一时刻同时请求，那么用Synchronizing Timer来做集合点。 
・为了节省系统资源，使用非窗口模式运行JMeter（jmeter -n -t test.jmx） 
・如果模拟并发用户过多，比如200线程，那么可以分散到多台机器上运行Jmeter（比如4台电脑，每台50线程） 
更多功能请参照使用手册 
中文手册（未完成）http://wiki.javascud.org/pages/viewpage.action?pageId=5566 

6、在winnt系统上，使用perfmon来帮助Jmeter采集服务器的系统资源数据，可以配置log输出这些数据作为性能瓶颈分析时使用。 .
声明：ITeye文章版权属于作者，受法律保护。没有作者书面许可不得转载。 

推荐链接•

 
•Java开发新方式：专注UI，快速开发！


 


返回顶楼


     
 





javazhujf
等级: 初级会员

性别: 
文章: 41
积分: 60
来自: 沈阳

 


   发表时间：2008-07-15   



写了这么多，希望喜欢JMeter的人批评指正。 .
 


返回顶楼


     回帖地址

0 0 请登录后投票
 





chengnuoangel
等级: 初级会员

性别: 
文章: 27
积分: 50
来自: 河南郑州

 


   发表时间：2008-10-10   



这两天正在用JMETER做压力测试 
一边学一边做，多交流.
 


返回顶楼


     回帖地址

0 0 请登录后投票
 





zongxing
等级: 初级会员

性别: 
文章: 19
积分: 60
来自: 广州

 


   发表时间：2009-02-09   



中文文档做的很漂亮。 .
 


返回顶楼


     回帖地址

0 0 请登录后投票
 








论坛首页 →Java企业应用版

跳转论坛:移动开发技术 Web前端技术 Java企业应用 编程语言技术 综合技术 入门技术 招聘求职 海阔天空云南: 云南远信诚聘高级软件工程师(J2EE) 
上海: 用友汽车软件诚聘中级java程序员（工作地点：
云南: 云南远信诚聘软件工程师（Java）
上海: 用友汽车软件诚聘项目经理
吉林: 用友汽车软件诚聘高级Java工程师工作地点：长
上海: 用友汽车软件诚聘高级java开发工程师（UAP平
上海: 用友汽车软件诚聘初级java开发工程师（UAP平
上海: 用友汽车软件诚聘高级Java程序员
广东: 用友汽车软件诚聘中级JAVA工程师 工作地点：






首页
资讯
精华
论坛
问答
博客
专栏
群组
招聘
搜索
 .

广告服务
ITeye黑板报
联系我们
友情链接

© 2003-2012 ITeye.com. [ 京ICP证110151号 京公网安备110105010620 ]
百联优力(北京)投资有限公司 版权所有

 
