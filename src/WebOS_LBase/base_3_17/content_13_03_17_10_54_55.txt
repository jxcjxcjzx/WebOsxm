百度首页|手机知道|登录注册

新闻网页贴吧知道音乐图片视频地图百科文库经验
提问

百度知道 > 电脑/网络 > 操作系统/系统故障 > Windows
同问
Unix管道机制
2010-10-07 13:53提问者： zhshj0926 |浏览次数：2078次
我来帮他解答
满意回答
2010-10-07 13:58
管道是一种进程间的通信机制，Windows 和 Linux（以及 UNIX）上都使用的这种机制。 管道源自“贝尔实验室”开发的 UNIX ，并且所有的 UNIX 和 Linux 都继承了这项技术。 管道是通过通常的 IO 接口存取的字节流。创建管道后，通过使用操作系统的任何读或写 IO 系统调用来读或者写它。在 UNIX 和 Linux 环境中，IO 调用是 read() 和 write() 。 在 Windows 环境中，API 是 ReadFile() 和 WriteFile() 。Windows 管道与 Linux 管道的区别在于 Windows 使用单一句柄（类似于 Linux 文件描述符）支持双向 IO。Linux 管道返回两个文件描述符来实现双向 IO。 

   管道（pipe）通信

主要用于大批量的信息传递，管道可用于同一用户的同祖先的进程间通信，而有名管道（FIFO管道）可用于不同用户进程间的通信。系统将管道文件作为通信的介质，构成两端进程传递信息的流水线。通常设定一个进程向管道中写信息，另一个进程从管道中读信息。

管道读写的特点：

（1）写操作

    对管道写时，每次write调用操作的结果总是附加在管道的末端（而文件写可以通过调整指针随意进行）；一次写入的字节数最好不要大于设定的系统常量PIPE_BUF；当设备处于忙状态时，write调用会被阻塞并被延迟执行。完成时将返回实际写入的字节数；当试图对一个没有被进程打开作为写的管道而进行write操作时，将生成SIGPIPE信号，并且系统公用变量errno的值被置为EPIPE，表示管道被破坏。

（2）读操作

    所有的read调用总是从管道当前位置开始，即管道文件不支持搜索指针的移动；当管道中无信息时read系统调用被阻塞，但对空文件读时可返回空串并不发生阻塞；若管道未被其他进程以写方式打开，就对管道做read则返回0.

    无名管道：由系统调用pipe创建，当pipe调用成功时将返回两个整形文件描述符filedes[0]和filedes[1]，分别指向两个数据流。

    传统unix系统命令创建的管道是单向的（半双工方式）此时数据传递的方向是单向的，即所创建的文件描述符一端只能用于读，另一端只能用于写，若需要双方数据传递时则需要建立两个管道文件。而现代unix中pipe系统调用可以返回两个全双工的文件描述符，即所建立的管道可同时用于读操作和写操作。若filedes[0]用来写，则filedes[1]用来读，若filedes[1]用来写，则filedes[0]用来读，而半双工时时固定的。

    有名管道：本质上与无名管道在应用上是相同的，但有名管道具有一些其他的特点，如再有名管道生成时会在文件系统中生成一个目录表项，有了目录表项就有了文件访问权限的管理，就可以让其他进程对管道进行访问。有名管道可以在shell中创建也可以在程序中创建，创建有名管道的命令为：mknod
参考资料：http://hi.chinaunix.net/?14015773/viewspace-47837
5|评论

求助知友
temp_forwork | 当前分类：13 级
擅长Windows：13 级
按默认排序|按时间排序
 其他回答 共1条
2010-10-07 23:41dj0227msn|当前分类：6 级
在使用的时候 很简单，  "|"   比如 grep posix * |  less
将检索出的结果通过管道输出到下一个程序中分页显示，使用管道可以将很多程序连接成一个大的工具。
1|评论
相关内容
2008-01-09 unix管道符的按键在哪?
2011-08-10 UNIX中的popen函数返回的是一个文件指针，这个文件指针是指向的他所...
2008-09-03 请介绍一下 unix domain sockets 这种IPC机制  2
2011-05-20 《信息安全》Linux/Unix安全机制概述？
2009-10-24 unix 编写一利用socket机制通信的程序对
unix:环境 unix:进程 unix:主机 unix:linux
2010-08-16 UNIX环境高级编程  8
2010-03-28 unix设置环境变量  6
2010-06-05 unix修改环境变量  3
2009-06-03 UNIX的环境变量是什么  15
2007-06-20 UNIX的开发环境?  8
更多关于unix:环境的问题>>
等待您来回答
0回答为什么我的电脑刚开机后键盘反应速度很慢?另外只要一直按着shift键...
0回答win7的声音系统为什么改不了
1回答 5 电脑开机运行1分钟以后自动关机，然后就开不了机了。 
0回答tenda win8如何使用无线路由器
2回答重装电脑 
0回答家里用无线路由器，然后手机能用，在电脑上不知道点了什么手机用不...
0回答高手们，你们好，帮我看看这个配置为什么电脑反应比较慢，是不兼容...
3回答 40 win8下蓝牙键盘玩游戏没反应 
更多等待您来回答的问题>>
分享到：
推广链接管道安装上海益晔 诚信为本 
从事机电设备安装工程通风管道安装工程施工经验.管道安装,咨询热线:021-54843601.专.. www.shyejd.com
安装管道首选一条龙锅炉服务有限公司 
本公司是苏州最大的锅炉专业服务公司,自一九八五年成立至今已有二十年历史.全国锅炉.. www.ytlgl.com
管道安装 中拓石油国内技术一流 
中拓石油专业管道安装雄厚的技术实力,专业的施工队伍.管道安装设备精良,配置合理.管.. ztsygd.qihuiwang.com
普通登录
手机登录
帐号
密码
记住我的登录状态
忘记密码？

还没有百度账号？立即注册
管道安装上海益晔 诚信为本
从事机电设备安装工程通风管道安装工程施工经验.管道安装,咨询热线:021-54843601.专..
www.shyejd.com

安装管道首选一条龙锅炉服务..
本公司是苏州最大的锅炉专业服务公司,自一九八五年成立至今已有二十年历史.全国锅炉..
www.ytlgl.com

管道安装 中拓石油国内技术..
中拓石油专业管道安装雄厚的技术实力,专业的施工队伍.管道安装设备精良,配置合理.管..
ztsygd.qihuiwang.com

管道疏通机
管道疏通机,河南豫北机械环卫设备专业生产各种规格型号管道疏通机,锅炉清洗机,环卫..
aytswz.dhlj.cn

管道制造厂
沧州龙盛管道厂专业制造管道,欢迎新老客户前来洽谈业务!
www.longshenggd.com/

管道检测,工业管道检测,地下..
优质管道检测仪器设备,工程服务及技术解决方案供应商:中仪物联—管道检测专家.管道..
www.zy-cam.com

气体管道安装首选武汉蓝宇 ..
武汉蓝宇公司专业从事气体管道安装,多年行业经验,管道质量有保障,电话:18607122088...
www.lanyugd.com

来百度推广Windows



精彩知识在知道
某某人知道_第七期：指甲上的秘密
中国打假“第一人”，教你混社会不吃亏
跳槽前必读，不看就后悔！
HR不懂爱，他的提问你答不来！
帮助 | 反馈建议 | 投诉举报 | 百度知道免费代码
©2013 Baidu   使用百度前必读 | 知道协议 | 百度知道开放平台
