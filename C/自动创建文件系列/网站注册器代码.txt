#include <stdio.h>
#include <stdlib.h>
#include <iostream.h>
#include <windows.h>
#include <time.h>

class zhuce
{
public:
	char name[20];
    char mima[20];
    void getmima(char *fp);
};

void zhuce::getmima(char *fp)
{
  int i;
  for(i=0;i<20;i++)
  {
	  mima[i]=*fp;
      fp++;
  }


}

#include "zhuce.h"

int shengdan(char *count);


int main(int argc,char* argv[])
{
  zhuce qianghan;
  FILE *fp;
  int i;
  int counter; 
  char zhucename[20];
  char chansheng[20];
  char miaoshu[50];
  cout<<"??¨®-¨º1¨®?¨ª???¡Á¡é2¨¢?¡Â¡ê¡§?a¡¤¡é¡êo?¡¥D¨¤3¨º Mr Jxc ?¨ªD?2?¡ê?"<<endl;
  Sleep(1000);
  cout<<"??¨º?¨¨??¨¤¨®|¡Á¡é2¨¢¦Ì??¨¨¨º?D??¡é¡ê?¡¤?¡À?¨º1¨®?"<<endl;
  cin>>miaoshu;
  cout<<"??¨º?¨¨?????¨°a¡Á¡é2¨¢¦Ì?¨®??¡ì??¡ê??¨°???a?¨²¦Ì???"<<endl;
  cin>>zhucename;
  cout<<zhucename;
  int mimaweishu=shengdan(chansheng);
  qianghan.getmima(chansheng);
  for(counter=0;counter<mimaweishu;counter++)
	  cout<<qianghan.mima[counter];
  if((fp=fopen("mima.txt","a"))==NULL)
	  cout<<"??o?¨®D¦Ì?2???¡ê?¡ä¨°2??a???t"<<endl;
  fprintf(fp,"%s","                        ");
  fprintf(fp,"%s","D¨¤2¨²¨¦¨²¦Ì??¨¨¨º?¡êo");
  fprintf(fp,"%s",miaoshu);
  fprintf(fp,"%s","        ");
  fprintf(fp,"%s","¡Á¡é2¨¢??¡êo");
  fprintf(fp,"%s",zhucename);
  fprintf(fp,"%s","        ");
  fprintf(fp,"%s","?¨¹??¡êo");
  for(i=0;i<mimaweishu;i++)
	  fprintf(fp,"%c",qianghan.mima[i]);

  Sleep(5000);
  cout<<"D?D?¨º1¨®?¡ê?";

  fclose(fp);
 
  return 0;
}

int shengdan(char *count)
{
  char a[19];
  char b[101];
  int i;
  int j;
  int weishu;
  cout<<"???¨º??D¨¨¨°a¡Á??¡¥???¨²¨¦¨²3¨¦?¨¤¨¦¨´???¨¹??¡ê?"<<endl;
  cout<<"??¡Á¡é¨°a¡À?3¨¬D¨°¡Á??¨¤?¨¦2¨²¨¦¨²19???£¤???¨¹??"<<endl;
  cin>>weishu;
  srand((unsigned)time(NULL));
  for(i=0;i<weishu;i++)
  { 
	  j=rand()%62;
     if(j>=0&&j<10)
		 a[i]=j+48;
	 else
		 if(j>=10&&j<36)
			 a[i]=j+55;
		 else
			 if(j>=36&&j<62)
				 a[i]=j+61;
     cout<<a[i];
  }
  cout<<"D?D?¨º1¨®?¡ê?"<<endl;
  for(i=0;i<weishu;i++)
  {
	  *count=a[i];
      count++;
  }
  return weishu;

  
}

